{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchesMiddleware = matchesMiddleware;\nexports.createKey = createKey;\nexports.default = void 0;\nvar _async_to_generator = require(\"@swc/helpers/lib/_async_to_generator.js\").default;\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\nvar _interop_require_wildcard = require(\"@swc/helpers/lib/_interop_require_wildcard.js\").default;\nvar _removeTrailingSlash = require(\"./utils/remove-trailing-slash\");\nvar _routeLoader = require(\"../../../client/route-loader\");\nvar _script = require(\"../../../client/script\");\nvar _isError = _interop_require_wildcard(require(\"../../../lib/is-error\"));\nvar _denormalizePagePath = require(\"../page-path/denormalize-page-path\");\nvar _normalizeLocalePath = require(\"../i18n/normalize-locale-path\");\nvar _mitt = _interop_require_default(require(\"../mitt\"));\nvar _utils = require(\"../utils\");\nvar _isDynamic = require(\"./utils/is-dynamic\");\nvar _parseRelativeUrl = require(\"./utils/parse-relative-url\");\nvar _resolveRewrites = _interop_require_default(require(\"./utils/resolve-rewrites\"));\nvar _routeMatcher = require(\"./utils/route-matcher\");\nvar _routeRegex = require(\"./utils/route-regex\");\nvar _formatUrl = require(\"./utils/format-url\");\nvar _detectDomainLocale = require(\"../../../client/detect-domain-locale\");\nvar _parsePath = require(\"./utils/parse-path\");\nvar _addLocale = require(\"../../../client/add-locale\");\nvar _removeLocale = require(\"../../../client/remove-locale\");\nvar _removeBasePath = require(\"../../../client/remove-base-path\");\nvar _addBasePath = require(\"../../../client/add-base-path\");\nvar _hasBasePath = require(\"../../../client/has-base-path\");\nvar _isApiRoute = require(\"../../../lib/is-api-route\");\nvar _getNextPathnameInfo = require(\"./utils/get-next-pathname-info\");\nvar _formatNextPathnameInfo = require(\"./utils/format-next-pathname-info\");\nvar _compareStates = require(\"./utils/compare-states\");\nvar _isLocalUrl = require(\"./utils/is-local-url\");\nvar _isBot = require(\"./utils/is-bot\");\nvar _omit = require(\"./utils/omit\");\nvar _resolveHref = require(\"./utils/resolve-href\");\nvar _interpolateAs = require(\"./utils/interpolate-as\");\nvar _handleSmoothScroll = require(\"./utils/handle-smooth-scroll\");\nfunction buildCancellationError() {\n  return Object.assign(new Error('Route Cancelled'), {\n    cancelled: true\n  });\n}\nfunction matchesMiddleware(options) {\n  return _matchesMiddleware.apply(this, arguments);\n}\nfunction _matchesMiddleware() {\n  _matchesMiddleware = _async_to_generator(function* (options) {\n    const matchers = yield Promise.resolve(options.router.pageLoader.getMiddleware());\n    if (!matchers) return false;\n    const {\n      pathname: asPathname\n    } = (0, _parsePath).parsePath(options.asPath);\n    // remove basePath first since path prefix has to be in the order of `/${basePath}/${locale}`\n    const cleanedAs = (0, _hasBasePath).hasBasePath(asPathname) ? (0, _removeBasePath).removeBasePath(asPathname) : asPathname;\n    const asWithBasePathAndLocale = (0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, options.locale));\n    // Check only path match on client. Matching \"has\" should be done on server\n    // where we can access more info such as headers, HttpOnly cookie, etc.\n    return matchers.some(m => new RegExp(m.regexp).test(asWithBasePathAndLocale));\n  });\n  return _matchesMiddleware.apply(this, arguments);\n}\nfunction stripOrigin(url) {\n  const origin = (0, _utils).getLocationOrigin();\n  return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\nfunction prepareUrlAs(router, url, as) {\n  // If url and as provided as an object representation,\n  // we'll format them into the string version here.\n  let [resolvedHref, resolvedAs] = (0, _resolveHref).resolveHref(router, url, true);\n  const origin = (0, _utils).getLocationOrigin();\n  const hrefWasAbsolute = resolvedHref.startsWith(origin);\n  const asWasAbsolute = resolvedAs && resolvedAs.startsWith(origin);\n  resolvedHref = stripOrigin(resolvedHref);\n  resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n  const preparedUrl = hrefWasAbsolute ? resolvedHref : (0, _addBasePath).addBasePath(resolvedHref);\n  const preparedAs = as ? stripOrigin((0, _resolveHref).resolveHref(router, as)) : resolvedAs || resolvedHref;\n  return {\n    url: preparedUrl,\n    as: asWasAbsolute ? preparedAs : (0, _addBasePath).addBasePath(preparedAs)\n  };\n}\nfunction resolveDynamicRoute(pathname, pages) {\n  const cleanPathname = (0, _removeTrailingSlash).removeTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n  if (cleanPathname === '/404' || cleanPathname === '/_error') {\n    return pathname;\n  }\n  // handle resolving href for dynamic routes\n  if (!pages.includes(cleanPathname)) {\n    // eslint-disable-next-line array-callback-return\n    pages.some(page => {\n      if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n        pathname = page;\n        return true;\n      }\n    });\n  }\n  return (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n}\nfunction getMiddlewareData(source, response, options) {\n  const nextConfig = {\n    basePath: options.router.basePath,\n    i18n: {\n      locales: options.router.locales\n    },\n    trailingSlash: Boolean(process.env.__NEXT_TRAILING_SLASH)\n  };\n  const rewriteHeader = response.headers.get('x-nextjs-rewrite');\n  let rewriteTarget = rewriteHeader || response.headers.get('x-nextjs-matched-path');\n  const matchedPath = response.headers.get('x-matched-path');\n  if (matchedPath && !rewriteTarget && !matchedPath.includes('__next_data_catchall') && !matchedPath.includes('/_error') && !matchedPath.includes('/404')) {\n    // leverage x-matched-path to detect next.config.js rewrites\n    rewriteTarget = matchedPath;\n  }\n  if (rewriteTarget) {\n    if (rewriteTarget.startsWith('/') || process.env.__NEXT_EXTERNAL_MIDDLEWARE_REWRITE_RESOLVE) {\n      const parsedRewriteTarget = (0, _parseRelativeUrl).parseRelativeUrl(rewriteTarget);\n      const pathnameInfo = (0, _getNextPathnameInfo).getNextPathnameInfo(parsedRewriteTarget.pathname, {\n        nextConfig,\n        parseData: true\n      });\n      let fsPathname = (0, _removeTrailingSlash).removeTrailingSlash(pathnameInfo.pathname);\n      return Promise.all([options.router.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest()]).then(_ref => {\n        let [pages, {\n          __rewrites: rewrites\n        }] = _ref;\n        let as = (0, _addLocale).addLocale(pathnameInfo.pathname, pathnameInfo.locale);\n        if ((0, _isDynamic).isDynamicRoute(as) || !rewriteHeader && pages.includes((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(as), options.router.locales).pathname)) {\n          const parsedSource = (0, _getNextPathnameInfo).getNextPathnameInfo((0, _parseRelativeUrl).parseRelativeUrl(source).pathname, {\n            parseData: true\n          });\n          as = (0, _addBasePath).addBasePath(parsedSource.pathname);\n          parsedRewriteTarget.pathname = as;\n        }\n        if (process.env.__NEXT_HAS_REWRITES) {\n          const result = (0, _resolveRewrites).default(as, pages, rewrites, parsedRewriteTarget.query, path => resolveDynamicRoute(path, pages), options.router.locales);\n          if (result.matchedPage) {\n            parsedRewriteTarget.pathname = result.parsedAs.pathname;\n            as = parsedRewriteTarget.pathname;\n            Object.assign(parsedRewriteTarget.query, result.parsedAs.query);\n          }\n        } else if (!pages.includes(fsPathname)) {\n          const resolvedPathname = resolveDynamicRoute(fsPathname, pages);\n          if (resolvedPathname !== fsPathname) {\n            fsPathname = resolvedPathname;\n          }\n        }\n        const resolvedHref = !pages.includes(fsPathname) ? resolveDynamicRoute((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(parsedRewriteTarget.pathname), options.router.locales).pathname, pages) : fsPathname;\n        if ((0, _isDynamic).isDynamicRoute(resolvedHref)) {\n          const matches = (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(resolvedHref))(as);\n          Object.assign(parsedRewriteTarget.query, matches || {});\n        }\n        return {\n          type: 'rewrite',\n          parsedAs: parsedRewriteTarget,\n          resolvedHref\n        };\n      });\n    }\n    const src = (0, _parsePath).parsePath(source);\n    const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n      nextConfig,\n      parseData: true\n    }), {\n      defaultLocale: options.router.defaultLocale,\n      buildId: ''\n    }));\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: `${pathname}${src.query}${src.hash}`\n    });\n  }\n  const redirectTarget = response.headers.get('x-nextjs-redirect');\n  if (redirectTarget) {\n    if (redirectTarget.startsWith('/')) {\n      const src = (0, _parsePath).parsePath(redirectTarget);\n      const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n        nextConfig,\n        parseData: true\n      }), {\n        defaultLocale: options.router.defaultLocale,\n        buildId: ''\n      }));\n      return Promise.resolve({\n        type: 'redirect-internal',\n        newAs: `${pathname}${src.query}${src.hash}`,\n        newUrl: `${pathname}${src.query}${src.hash}`\n      });\n    }\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: redirectTarget\n    });\n  }\n  return Promise.resolve({\n    type: 'next'\n  });\n}\nfunction withMiddlewareEffects(options) {\n  return _withMiddlewareEffects.apply(this, arguments);\n}\nfunction _withMiddlewareEffects() {\n  _withMiddlewareEffects = _async_to_generator(function* (options) {\n    const matches = yield matchesMiddleware(options);\n    if (!matches || !options.fetchData) {\n      return null;\n    }\n    try {\n      const data = yield options.fetchData();\n      const effect = yield getMiddlewareData(data.dataHref, data.response, options);\n      return {\n        dataHref: data.dataHref,\n        json: data.json,\n        response: data.response,\n        text: data.text,\n        cacheKey: data.cacheKey,\n        effect\n      };\n    } catch (e) {\n      /**\n      * TODO: Revisit this in the future.\n      * For now we will not consider middleware data errors to be fatal.\n      * maybe we should revisit in the future.\n      */\n      return null;\n    }\n  });\n  return _withMiddlewareEffects.apply(this, arguments);\n}\nconst manualScrollRestoration = process.env.__NEXT_SCROLL_RESTORATION && typeof window !== 'undefined' && 'scrollRestoration' in window.history && !!function () {\n  try {\n    let v = '__next';\n    // eslint-disable-next-line no-sequences\n    return sessionStorage.setItem(v, v), sessionStorage.removeItem(v), true;\n  } catch (n) {}\n}();\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\nfunction fetchRetry(url, attempts, options) {\n  return fetch(url, {\n    // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n    // Cookies may also be required for `getServerSideProps`.\n    //\n    // > `fetch` wonâ€™t send cookies, unless you set the credentials init\n    // > option.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n    //\n    // > For maximum browser compatibility when it comes to sending &\n    // > receiving cookies, always supply the `credentials: 'same-origin'`\n    // > option instead of relying on the default.\n    // https://github.com/github/fetch#caveats\n    credentials: 'same-origin',\n    method: options.method || 'GET',\n    headers: Object.assign({}, options.headers, {\n      'x-nextjs-data': '1'\n    })\n  }).then(response => {\n    return !response.ok && attempts > 1 && response.status >= 500 ? fetchRetry(url, attempts - 1, options) : response;\n  });\n}\nfunction tryToParseAsJSON(text) {\n  try {\n    return JSON.parse(text);\n  } catch (error) {\n    return null;\n  }\n}\nfunction fetchNextData(_ref2) {\n  let {\n    dataHref,\n    inflightCache,\n    isPrefetch,\n    hasMiddleware,\n    isServerRender,\n    parseJSON,\n    persistCache,\n    isBackground,\n    unstable_skipClientCache\n  } = _ref2;\n  const {\n    href: cacheKey\n  } = new URL(dataHref, window.location.href);\n  var ref1;\n  const getData = params => {\n    return fetchRetry(dataHref, isServerRender ? 3 : 1, {\n      headers: Object.assign({}, isPrefetch ? {\n        purpose: 'prefetch'\n      } : {}, isPrefetch && hasMiddleware ? {\n        'x-middleware-prefetch': '1'\n      } : {}),\n      method: (ref1 = params == null ? void 0 : params.method) != null ? ref1 : 'GET'\n    }).then(response => {\n      if (response.ok && (params == null ? void 0 : params.method) === 'HEAD') {\n        return {\n          dataHref,\n          response,\n          text: '',\n          json: {},\n          cacheKey\n        };\n      }\n      return response.text().then(text => {\n        if (!response.ok) {\n          /**\n          * When the data response is a redirect because of a middleware\n          * we do not consider it an error. The headers must bring the\n          * mapped location.\n          * TODO: Change the status code in the handler.\n          */\n          if (hasMiddleware && [301, 302, 307, 308].includes(response.status)) {\n            return {\n              dataHref,\n              response,\n              text,\n              json: {},\n              cacheKey\n            };\n          }\n          if (!hasMiddleware && response.status === 404) {\n            var ref;\n            if ((ref = tryToParseAsJSON(text)) == null ? void 0 : ref.notFound) {\n              return {\n                dataHref,\n                json: {\n                  notFound: SSG_DATA_NOT_FOUND\n                },\n                response,\n                text,\n                cacheKey\n              };\n            }\n          }\n          const error = new Error(`Failed to load static props`);\n          /**\n          * We should only trigger a server-side transition if this was\n          * caused on a client-side transition. Otherwise, we'd get into\n          * an infinite loop.\n          */\n          if (!isServerRender) {\n            (0, _routeLoader).markAssetError(error);\n          }\n          throw error;\n        }\n        return {\n          dataHref,\n          json: parseJSON ? tryToParseAsJSON(text) : null,\n          response,\n          text,\n          cacheKey\n        };\n      });\n    }).then(data => {\n      if (!persistCache || process.env.NODE_ENV !== 'production' || data.response.headers.get('x-middleware-cache') === 'no-cache') {\n        delete inflightCache[cacheKey];\n      }\n      return data;\n    }).catch(err => {\n      if (!unstable_skipClientCache) {\n        delete inflightCache[cacheKey];\n      }\n      if (\n      // chrome\n      err.message === 'Failed to fetch' ||\n      // firefox\n      err.message === 'NetworkError when attempting to fetch resource.' ||\n      // safari\n      err.message === 'Load failed') {\n        (0, _routeLoader).markAssetError(err);\n      }\n      throw err;\n    });\n  };\n  // when skipping client cache we wait to update\n  // inflight cache until successful data response\n  // this allows racing click event with fetching newer data\n  // without blocking navigation when stale data is available\n  if (unstable_skipClientCache && persistCache) {\n    return getData({}).then(data => {\n      inflightCache[cacheKey] = Promise.resolve(data);\n      return data;\n    });\n  }\n  if (inflightCache[cacheKey] !== undefined) {\n    return inflightCache[cacheKey];\n  }\n  return inflightCache[cacheKey] = getData(isBackground ? {\n    method: 'HEAD'\n  } : {});\n}\nfunction createKey() {\n  return Math.random().toString(36).slice(2, 10);\n}\nfunction handleHardNavigation(_ref3) {\n  let {\n    url,\n    router\n  } = _ref3;\n  // ensure we don't trigger a hard navigation to the same\n  // URL as this can end up with an infinite refresh\n  if (url === (0, _addBasePath).addBasePath((0, _addLocale).addLocale(router.asPath, router.locale))) {\n    throw new Error(`Invariant: attempted to hard navigate to the same URL ${url} ${location.href}`);\n  }\n  window.location.href = url;\n}\nconst getCancelledHandler = _ref4 => {\n  let {\n    route,\n    router\n  } = _ref4;\n  let cancelled = false;\n  const cancel = router.clc = () => {\n    cancelled = true;\n  };\n  const handleCancelled = () => {\n    if (cancelled) {\n      const error = new Error(`Abort fetching component for route: \"${route}\"`);\n      error.cancelled = true;\n      throw error;\n    }\n    if (cancel === router.clc) {\n      router.clc = null;\n    }\n  };\n  return handleCancelled;\n};\nclass Router {\n  reload() {\n    window.location.reload();\n  }\n  /**\n  * Go back in history\n  */\n  back() {\n    window.history.back();\n  }\n  /**\n  * Go forward in history\n  */\n  forward() {\n    window.history.forward();\n  }\n  /**\n  * Performs a `pushState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n  push(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (process.env.__NEXT_SCROLL_RESTORATION) {\n      // TODO: remove in the future when we update history before route change\n      // is complete, as the popstate event should handle this capture.\n      if (manualScrollRestoration) {\n        try {\n          // Snapshot scroll position right before navigating to a new page:\n          sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n            x: self.pageXOffset,\n            y: self.pageYOffset\n          }));\n        } catch (e) {}\n      }\n    }\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('pushState', url, as, options);\n  }\n  /**\n  * Performs a `replaceState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n  replace(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('replaceState', url, as, options);\n  }\n  _bfl(as, resolvedAs, locale) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      if (process.env.__NEXT_CLIENT_ROUTER_FILTER_ENABLED) {\n        let matchesBflStatic = false;\n        let matchesBflDynamic = false;\n        for (const curAs of [as, resolvedAs]) {\n          if (curAs) {\n            const asNoSlash = (0, _removeTrailingSlash).removeTrailingSlash(new URL(curAs, 'http://n').pathname);\n            const asNoSlashLocale = (0, _addBasePath).addBasePath((0, _addLocale).addLocale(asNoSlash, locale || _this.locale));\n            if (asNoSlash !== (0, _removeTrailingSlash).removeTrailingSlash(new URL(_this.asPath, 'http://n').pathname)) {\n              var ref, ref2;\n              matchesBflStatic = matchesBflStatic || !!((ref = _this._bfl_s) == null ? void 0 : ref.has(asNoSlash)) || !!((ref2 = _this._bfl_s) == null ? void 0 : ref2.has(asNoSlashLocale));\n              for (const normalizedAS of [asNoSlash, asNoSlashLocale]) {\n                // if any sub-path of as matches a dynamic filter path\n                // it should be hard navigated\n                const curAsParts = normalizedAS.split('/');\n                for (let i = 0; !matchesBflDynamic && i < curAsParts.length + 1; i++) {\n                  var ref3;\n                  const currentPart = curAsParts.slice(0, i).join('/');\n                  if (currentPart && ((ref3 = _this._bfl_d) == null ? void 0 : ref3.has(currentPart))) {\n                    matchesBflDynamic = true;\n                    break;\n                  }\n                }\n              }\n              // if the client router filter is matched then we trigger\n              // a hard navigation\n              if (matchesBflStatic || matchesBflDynamic) {\n                handleHardNavigation({\n                  url: (0, _addBasePath).addBasePath((0, _addLocale).addLocale(as, locale || _this.locale)),\n                  router: _this\n                });\n                return new Promise(() => {});\n              }\n            }\n          }\n        }\n      }\n    })();\n  }\n  change(method, url, as, options, forcedScroll) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      if (!(0, _isLocalUrl).isLocalURL(url)) {\n        handleHardNavigation({\n          url,\n          router: _this\n        });\n        return false;\n      }\n      // WARNING: `_h` is an internal option for handing Next.js client-side\n      // hydration. Your app should _never_ use this property. It may change at\n      // any time without notice.\n      const isQueryUpdating = options._h === 1;\n      if (!isQueryUpdating) {\n        yield _this._bfl(as, undefined, options.locale);\n      }\n      let shouldResolveHref = isQueryUpdating || options._shouldResolveHref || (0, _parsePath).parsePath(url).pathname === (0, _parsePath).parsePath(as).pathname;\n      const nextState = _extends({}, _this.state);\n      // for static pages with query params in the URL we delay\n      // marking the router ready until after the query is updated\n      // or a navigation has occurred\n      const readyStateChange = _this.isReady !== true;\n      _this.isReady = true;\n      const isSsr = _this.isSsr;\n      if (!isQueryUpdating) {\n        _this.isSsr = false;\n      }\n      // if a route transition is already in progress before\n      // the query updating is triggered ignore query updating\n      if (isQueryUpdating && _this.clc) {\n        return false;\n      }\n      const prevLocale = nextState.locale;\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        nextState.locale = options.locale === false ? _this.defaultLocale : options.locale || nextState.locale;\n        if (typeof options.locale === 'undefined') {\n          options.locale = nextState.locale;\n        }\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as);\n        const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n        if (localePathResult.detectedLocale) {\n          nextState.locale = localePathResult.detectedLocale;\n          parsedAs.pathname = (0, _addBasePath).addBasePath(parsedAs.pathname);\n          as = (0, _formatUrl).formatWithValidation(parsedAs);\n          url = (0, _addBasePath).addBasePath((0, _normalizeLocalePath).normalizeLocalePath((0, _hasBasePath).hasBasePath(url) ? (0, _removeBasePath).removeBasePath(url) : url, _this.locales).pathname);\n        }\n        let didNavigate = false;\n        // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          var ref;\n          // if the locale isn't configured hard navigate to show 404 page\n          if (!((ref = _this.locales) == null ? void 0 : ref.includes(nextState.locale))) {\n            parsedAs.pathname = (0, _addLocale).addLocale(parsedAs.pathname, nextState.locale);\n            handleHardNavigation({\n              url: (0, _formatUrl).formatWithValidation(parsedAs),\n              router: _this\n            });\n            // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n            didNavigate = true;\n          }\n        }\n        const detectedDomain = (0, _detectDomainLocale).detectDomainLocale(_this.domainLocales, undefined, nextState.locale);\n        // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          // if we are navigating to a domain locale ensure we redirect to the\n          // correct domain\n          if (!didNavigate && detectedDomain && _this.isLocaleDomain && self.location.hostname !== detectedDomain.domain) {\n            const asNoBasePath = (0, _removeBasePath).removeBasePath(as);\n            handleHardNavigation({\n              url: `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${(0, _addBasePath).addBasePath(`${nextState.locale === detectedDomain.defaultLocale ? '' : `/${nextState.locale}`}${asNoBasePath === '/' ? '' : asNoBasePath}` || '/')}`,\n              router: _this\n            });\n            // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n            didNavigate = true;\n          }\n        }\n        if (didNavigate) {\n          return new Promise(() => {});\n        }\n      }\n      // marking route changes as a navigation start entry\n      if (_utils.ST) {\n        performance.mark('routeChange');\n      }\n      const {\n        shallow = false,\n        scroll = true\n      } = options;\n      const routeProps = {\n        shallow\n      };\n      if (_this._inFlightRoute && _this.clc) {\n        if (!isSsr) {\n          Router.events.emit('routeChangeError', buildCancellationError(), _this._inFlightRoute, routeProps);\n        }\n        _this.clc();\n        _this.clc = null;\n      }\n      as = (0, _addBasePath).addBasePath((0, _addLocale).addLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, options.locale, _this.defaultLocale));\n      const cleanedAs = (0, _removeLocale).removeLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, nextState.locale);\n      _this._inFlightRoute = as;\n      const localeChange = prevLocale !== nextState.locale;\n      // If the url change is only related to a hash change\n      // We should not proceed. We should only change the state.\n      if (!isQueryUpdating && _this.onlyAHashChange(cleanedAs) && !localeChange) {\n        nextState.asPath = cleanedAs;\n        Router.events.emit('hashChangeStart', as, routeProps);\n        // TODO: do we need the resolved href when only a hash change?\n        _this.changeState(method, url, as, _extends({}, options, {\n          scroll: false\n        }));\n        if (scroll) {\n          _this.scrollToHash(cleanedAs);\n        }\n        try {\n          yield _this.set(nextState, _this.components[nextState.route], null);\n        } catch (err) {\n          if ((0, _isError).default(err) && err.cancelled) {\n            Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n          }\n          throw err;\n        }\n        Router.events.emit('hashChangeComplete', as, routeProps);\n        return true;\n      }\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n      // The build manifest needs to be loaded before auto-static dynamic pages\n      // get their query parameters to allow ensuring they can be parsed properly\n      // when rewritten to\n      let pages, rewrites;\n      try {\n        [pages, {\n          __rewrites: rewrites\n        }] = yield Promise.all([_this.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest(), _this.pageLoader.getMiddleware()]);\n      } catch (err) {\n        // If we fail to resolve the page list or client-build manifest, we must\n        // do a server-side transition:\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n      // If asked to change the current URL we should reload the current page\n      // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n      // We also need to set the method = replaceState always\n      // as this should not go into the history (That's how browsers work)\n      // We should compare the new asPath to the current asPath, not the url\n      if (!_this.urlIsNew(cleanedAs) && !localeChange) {\n        method = 'replaceState';\n      }\n      // we need to resolve the as value using rewrites for dynamic SSG\n      // pages to allow building the data URL correctly\n      let resolvedAs = as;\n      // url and as should always be prefixed with basePath by this\n      // point by either next/link or router.push/replace so strip the\n      // basePath from the pathname to match the pages dir 1-to-1\n      pathname = pathname ? (0, _removeTrailingSlash).removeTrailingSlash((0, _removeBasePath).removeBasePath(pathname)) : pathname;\n      let route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      const parsedAsPathname = as.startsWith('/') && (0, _parseRelativeUrl).parseRelativeUrl(as).pathname;\n      const isMiddlewareRewrite = !!(parsedAsPathname && route !== parsedAsPathname && (!(0, _isDynamic).isDynamicRoute(route) || !(0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(route))(parsedAsPathname)));\n      // we don't attempt resolve asPath when we need to execute\n      // middleware as the resolving will occur server-side\n      const isMiddlewareMatch = !options.shallow && (yield matchesMiddleware({\n        asPath: as,\n        locale: nextState.locale,\n        router: _this\n      }));\n      if (isQueryUpdating && isMiddlewareMatch) {\n        shouldResolveHref = false;\n      }\n      if (shouldResolveHref && pathname !== '/_error') {\n        options._shouldResolveHref = true;\n        if (process.env.__NEXT_HAS_REWRITES && as.startsWith('/')) {\n          const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, nextState.locale), true), pages, rewrites, query, p => resolveDynamicRoute(p, pages), _this.locales);\n          if (rewritesResult.externalDest) {\n            handleHardNavigation({\n              url: as,\n              router: _this\n            });\n            return true;\n          }\n          if (!isMiddlewareMatch) {\n            resolvedAs = rewritesResult.asPath;\n          }\n          if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n            // if this directly matches a page we need to update the href to\n            // allow the correct page chunk to be loaded\n            pathname = rewritesResult.resolvedHref;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        } else {\n          parsed.pathname = resolveDynamicRoute(pathname, pages);\n          if (parsed.pathname !== pathname) {\n            pathname = parsed.pathname;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        }\n      }\n      if (!(0, _isLocalUrl).isLocalURL(as)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`Invalid href: \"${url}\" and as: \"${as}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n        }\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n      resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(resolvedAs), nextState.locale);\n      route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      let routeMatch = false;\n      if ((0, _isDynamic).isDynamicRoute(route)) {\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n        const asPathname = parsedAs.pathname;\n        const routeRegex = (0, _routeRegex).getRouteRegex(route);\n        routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n        const shouldInterpolate = route === asPathname;\n        const interpolatedAs = shouldInterpolate ? (0, _interpolateAs).interpolateAs(route, asPathname, query) : {};\n        if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n          const missingParams = Object.keys(routeRegex.groups).filter(param => !query[param] && !routeRegex.groups[param].optional);\n          if (missingParams.length > 0 && !isMiddlewareMatch) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n            }\n            throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n          }\n        } else if (shouldInterpolate) {\n          as = (0, _formatUrl).formatWithValidation(Object.assign({}, parsedAs, {\n            pathname: interpolatedAs.result,\n            query: (0, _omit).omit(query, interpolatedAs.params)\n          }));\n        } else {\n          // Merge params into `query`, overwriting any specified in search\n          Object.assign(query, routeMatch);\n        }\n      }\n      if (!isQueryUpdating) {\n        Router.events.emit('routeChangeStart', as, routeProps);\n      }\n      const isErrorRoute = _this.pathname === '/404' || _this.pathname === '/_error';\n      try {\n        var ref4, ref5, ref6;\n        let routeInfo = yield _this.getRouteInfo({\n          route,\n          pathname,\n          query,\n          as,\n          resolvedAs,\n          routeProps,\n          locale: nextState.locale,\n          isPreview: nextState.isPreview,\n          hasMiddleware: isMiddlewareMatch,\n          unstable_skipClientCache: options.unstable_skipClientCache,\n          isQueryUpdating: isQueryUpdating && !_this.isFallback,\n          isMiddlewareRewrite\n        });\n        if (!isQueryUpdating) {\n          yield _this._bfl(as, 'resolvedAs' in routeInfo ? routeInfo.resolvedAs : undefined, nextState.locale);\n        }\n        if ('route' in routeInfo && isMiddlewareMatch) {\n          pathname = routeInfo.route || route;\n          route = pathname;\n          if (!routeProps.shallow) {\n            query = Object.assign({}, routeInfo.query || {}, query);\n          }\n          const cleanedParsedPathname = (0, _hasBasePath).hasBasePath(parsed.pathname) ? (0, _removeBasePath).removeBasePath(parsed.pathname) : parsed.pathname;\n          if (routeMatch && pathname !== cleanedParsedPathname) {\n            Object.keys(routeMatch).forEach(key => {\n              if (routeMatch && query[key] === routeMatch[key]) {\n                delete query[key];\n              }\n            });\n          }\n          if ((0, _isDynamic).isDynamicRoute(pathname)) {\n            const prefixedAs = !routeProps.shallow && routeInfo.resolvedAs ? routeInfo.resolvedAs : (0, _addBasePath).addBasePath((0, _addLocale).addLocale(new URL(as, location.href).pathname, nextState.locale), true);\n            let rewriteAs = prefixedAs;\n            if ((0, _hasBasePath).hasBasePath(rewriteAs)) {\n              rewriteAs = (0, _removeBasePath).removeBasePath(rewriteAs);\n            }\n            if (process.env.__NEXT_I18N_SUPPORT) {\n              const localeResult = (0, _normalizeLocalePath).normalizeLocalePath(rewriteAs, _this.locales);\n              nextState.locale = localeResult.detectedLocale || nextState.locale;\n              rewriteAs = localeResult.pathname;\n            }\n            const routeRegex = (0, _routeRegex).getRouteRegex(pathname);\n            const curRouteMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(new URL(rewriteAs, location.href).pathname);\n            if (curRouteMatch) {\n              Object.assign(query, curRouteMatch);\n            }\n          }\n        }\n        // If the routeInfo brings a redirect we simply apply it.\n        if ('type' in routeInfo) {\n          if (routeInfo.type === 'redirect-internal') {\n            return _this.change(method, routeInfo.newUrl, routeInfo.newAs, options);\n          } else {\n            handleHardNavigation({\n              url: routeInfo.destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n        }\n        const component = routeInfo.Component;\n        if (component && component.unstable_scriptLoader) {\n          const scripts = [].concat(component.unstable_scriptLoader());\n          scripts.forEach(script => {\n            (0, _script).handleClientScriptLoad(script.props);\n          });\n        }\n        // handle redirect on client-transition\n        if ((routeInfo.__N_SSG || routeInfo.__N_SSP) && routeInfo.props) {\n          if (routeInfo.props.pageProps && routeInfo.props.pageProps.__N_REDIRECT) {\n            // Use the destination from redirect without adding locale\n            options.locale = false;\n            const destination = routeInfo.props.pageProps.__N_REDIRECT;\n            // check if destination is internal (resolves to a page) and attempt\n            // client-navigation if it is falling back to hard navigation if\n            // it's not\n            if (destination.startsWith('/') && routeInfo.props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n              const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n              parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n              const {\n                url: newUrl,\n                as: newAs\n              } = prepareUrlAs(_this, destination, destination);\n              return _this.change(method, newUrl, newAs, options);\n            }\n            handleHardNavigation({\n              url: destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n          nextState.isPreview = !!routeInfo.props.__N_PREVIEW;\n          // handle SSG data 404\n          if (routeInfo.props.notFound === SSG_DATA_NOT_FOUND) {\n            let notFoundRoute;\n            try {\n              yield _this.fetchComponent('/404');\n              notFoundRoute = '/404';\n            } catch (_) {\n              notFoundRoute = '/_error';\n            }\n            routeInfo = yield _this.getRouteInfo({\n              route: notFoundRoute,\n              pathname: notFoundRoute,\n              query,\n              as,\n              resolvedAs,\n              routeProps: {\n                shallow: false\n              },\n              locale: nextState.locale,\n              isPreview: nextState.isPreview\n            });\n            if ('type' in routeInfo) {\n              throw new Error(`Unexpected middleware effect on /404`);\n            }\n          }\n        }\n        if (isQueryUpdating && _this.pathname === '/_error' && ((ref4 = self.__NEXT_DATA__.props) == null ? void 0 : (ref5 = ref4.pageProps) == null ? void 0 : ref5.statusCode) === 500 && ((ref6 = routeInfo.props) == null ? void 0 : ref6.pageProps)) {\n          // ensure statusCode is still correct for static 500 page\n          // when updating query information\n          routeInfo.props.pageProps.statusCode = 500;\n        }\n        var _route;\n        // shallow routing is only allowed for same page URL changes.\n        const isValidShallowRoute = options.shallow && nextState.route === ((_route = routeInfo.route) != null ? _route : route);\n        var _scroll;\n        const shouldScroll = (_scroll = options.scroll) != null ? _scroll : !isQueryUpdating && !isValidShallowRoute;\n        const resetScroll = shouldScroll ? {\n          x: 0,\n          y: 0\n        } : null;\n        const upcomingScrollState = forcedScroll != null ? forcedScroll : resetScroll;\n        // the new state that the router gonna set\n        const upcomingRouterState = _extends({}, nextState, {\n          route,\n          pathname,\n          query,\n          asPath: cleanedAs,\n          isFallback: false\n        });\n        // When the page being rendered is the 404 page, we should only update the\n        // query parameters. Route changes here might add the basePath when it\n        // wasn't originally present. This is also why this block is before the\n        // below `changeState` call which updates the browser's history (changing\n        // the URL).\n        if (isQueryUpdating && isErrorRoute) {\n          var ref7, ref8, ref9;\n          routeInfo = yield _this.getRouteInfo({\n            route: _this.pathname,\n            pathname: _this.pathname,\n            query,\n            as,\n            resolvedAs,\n            routeProps: {\n              shallow: false\n            },\n            locale: nextState.locale,\n            isPreview: nextState.isPreview,\n            isQueryUpdating: isQueryUpdating && !_this.isFallback\n          });\n          if ('type' in routeInfo) {\n            throw new Error(`Unexpected middleware effect on ${_this.pathname}`);\n          }\n          if (_this.pathname === '/_error' && ((ref7 = self.__NEXT_DATA__.props) == null ? void 0 : (ref8 = ref7.pageProps) == null ? void 0 : ref8.statusCode) === 500 && ((ref9 = routeInfo.props) == null ? void 0 : ref9.pageProps)) {\n            // ensure statusCode is still correct for static 500 page\n            // when updating query information\n            routeInfo.props.pageProps.statusCode = 500;\n          }\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (err) {\n            if ((0, _isError).default(err) && err.cancelled) {\n              Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n            }\n            throw err;\n          }\n          return true;\n        }\n        Router.events.emit('beforeHistoryChange', as, routeProps);\n        _this.changeState(method, url, as, options);\n        // for query updates we can skip it if the state is unchanged and we don't\n        // need to scroll\n        // https://github.com/vercel/next.js/issues/37139\n        const canSkipUpdating = isQueryUpdating && !upcomingScrollState && !readyStateChange && !localeChange && (0, _compareStates).compareRouterStates(upcomingRouterState, _this.state);\n        if (!canSkipUpdating) {\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (e) {\n            if (e.cancelled) routeInfo.error = routeInfo.error || e;else throw e;\n          }\n          if (routeInfo.error) {\n            if (!isQueryUpdating) {\n              Router.events.emit('routeChangeError', routeInfo.error, cleanedAs, routeProps);\n            }\n            throw routeInfo.error;\n          }\n          if (process.env.__NEXT_I18N_SUPPORT) {\n            if (nextState.locale) {\n              document.documentElement.lang = nextState.locale;\n            }\n          }\n          if (!isQueryUpdating) {\n            Router.events.emit('routeChangeComplete', as, routeProps);\n          }\n          // A hash mark # is the optional last part of a URL\n          const hashRegex = /#.+$/;\n          if (shouldScroll && hashRegex.test(as)) {\n            _this.scrollToHash(as);\n          }\n        }\n        return true;\n      } catch (err1) {\n        if ((0, _isError).default(err1) && err1.cancelled) {\n          return false;\n        }\n        throw err1;\n      }\n    })();\n  }\n  changeState(method, url, as) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof window.history === 'undefined') {\n        console.error(`Warning: window.history is not available.`);\n        return;\n      }\n      if (typeof window.history[method] === 'undefined') {\n        console.error(`Warning: window.history.${method} is not available`);\n        return;\n      }\n    }\n    if (method !== 'pushState' || (0, _utils).getURL() !== as) {\n      this._shallow = options.shallow;\n      window.history[method]({\n        url,\n        as,\n        options,\n        __N: true,\n        key: this._key = method !== 'pushState' ? this._key : createKey()\n      },\n      // Most browsers currently ignores this parameter, although they may use it in the future.\n      // Passing the empty string here should be safe against future changes to the method.\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n      '', as);\n    }\n  }\n  handleRouteInfoError(err, pathname, query, as, routeProps, loadErrorFail) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      console.error(err);\n      if (err.cancelled) {\n        // bubble up cancellation errors\n        throw err;\n      }\n      if ((0, _routeLoader).isAssetError(err) || loadErrorFail) {\n        Router.events.emit('routeChangeError', err, as, routeProps);\n        // If we can't load the page it could be one of following reasons\n        //  1. Page doesn't exists\n        //  2. Page does exist in a different zone\n        //  3. Internal error while loading the page\n        // So, doing a hard reload is the proper way to deal with this.\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        // Changing the URL doesn't block executing the current code path.\n        // So let's throw a cancellation error stop the routing logic.\n        throw buildCancellationError();\n      }\n      try {\n        let props;\n        const {\n          page: Component,\n          styleSheets\n        } = yield _this.fetchComponent('/_error');\n        const routeInfo = {\n          props,\n          Component,\n          styleSheets,\n          err,\n          error: err\n        };\n        if (!routeInfo.props) {\n          try {\n            routeInfo.props = yield _this.getInitialProps(Component, {\n              err,\n              pathname,\n              query\n            });\n          } catch (gipErr) {\n            console.error('Error in error page `getInitialProps`: ', gipErr);\n            routeInfo.props = {};\n          }\n        }\n        return routeInfo;\n      } catch (routeInfoErr) {\n        return _this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as, routeProps, true);\n      }\n    })();\n  }\n  getRouteInfo(_ref5) {\n    let {\n      route: requestedRoute,\n      pathname,\n      query,\n      as,\n      resolvedAs,\n      routeProps,\n      locale,\n      hasMiddleware,\n      isPreview,\n      unstable_skipClientCache,\n      isQueryUpdating,\n      isMiddlewareRewrite\n    } = _ref5;\n    var _this = this;\n    return _async_to_generator(function* () {\n      /**\n      * This `route` binding can change if there's a rewrite\n      * so we keep a reference to the original requested route\n      * so we can store the cache for it and avoid re-requesting every time\n      * for shallow routing purposes.\n      */\n      let route = requestedRoute;\n      try {\n        var ref, ref10, ref11, ref12;\n        const handleCancelled = getCancelledHandler({\n          route,\n          router: _this\n        });\n        let existingInfo = _this.components[route];\n        if (routeProps.shallow && existingInfo && _this.route === route) {\n          return existingInfo;\n        }\n        if (hasMiddleware) {\n          existingInfo = undefined;\n        }\n        let cachedRouteInfo = existingInfo && !('initial' in existingInfo) && process.env.NODE_ENV !== 'development' ? existingInfo : undefined;\n        const isBackground = isQueryUpdating;\n        const fetchNextDataParams = {\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: isBackground ? _this.sbc : _this.sdc,\n          persistCache: !isPreview,\n          isPrefetch: false,\n          unstable_skipClientCache,\n          isBackground\n        };\n        let data = isQueryUpdating && !isMiddlewareRewrite ? null : yield withMiddlewareEffects({\n          fetchData: () => fetchNextData(fetchNextDataParams),\n          asPath: resolvedAs,\n          locale: locale,\n          router: _this\n        }).catch(err => {\n          // we don't hard error during query updating\n          // as it's un-necessary and doesn't need to be fatal\n          // unless it is a fallback route and the props can't\n          // be loaded\n          if (isQueryUpdating) {\n            return null;\n          }\n          throw err;\n        });\n        if (isQueryUpdating) {\n          if (!data) {\n            data = {\n              json: self.__NEXT_DATA__.props\n            };\n          } else {\n            data.json = self.__NEXT_DATA__.props;\n          }\n        }\n        handleCancelled();\n        if ((data == null ? void 0 : (ref = data.effect) == null ? void 0 : ref.type) === 'redirect-internal' || (data == null ? void 0 : (ref10 = data.effect) == null ? void 0 : ref10.type) === 'redirect-external') {\n          return data.effect;\n        }\n        if ((data == null ? void 0 : (ref11 = data.effect) == null ? void 0 : ref11.type) === 'rewrite') {\n          const resolvedRoute = (0, _removeTrailingSlash).removeTrailingSlash(data.effect.resolvedHref);\n          const pages = yield _this.pageLoader.getPageList();\n          // during query updating the page must match although during\n          // client-transition a redirect that doesn't match a page\n          // can be returned and this should trigger a hard navigation\n          // which is valid for incremental migration\n          if (!isQueryUpdating || pages.includes(resolvedRoute)) {\n            route = resolvedRoute;\n            pathname = data.effect.resolvedHref;\n            query = _extends({}, query, data.effect.parsedAs.query);\n            resolvedAs = (0, _removeBasePath).removeBasePath((0, _normalizeLocalePath).normalizeLocalePath(data.effect.parsedAs.pathname, _this.locales).pathname);\n            // Check again the cache with the new destination.\n            existingInfo = _this.components[route];\n            if (routeProps.shallow && existingInfo && _this.route === route && !hasMiddleware) {\n              // If we have a match with the current route due to rewrite,\n              // we can copy the existing information to the rewritten one.\n              // Then, we return the information along with the matched route.\n              return _extends({}, existingInfo, {\n                route\n              });\n            }\n          }\n        }\n        if ((0, _isApiRoute).isAPIRoute(route)) {\n          handleHardNavigation({\n            url: as,\n            router: _this\n          });\n          return new Promise(() => {});\n        }\n        const routeInfo = cachedRouteInfo || (yield _this.fetchComponent(route).then(res => ({\n          Component: res.page,\n          styleSheets: res.styleSheets,\n          __N_SSG: res.mod.__N_SSG,\n          __N_SSP: res.mod.__N_SSP\n        })));\n        if (process.env.NODE_ENV !== 'production') {\n          const {\n            isValidElementType\n          } = require('next/dist/compiled/react-is');\n          if (!isValidElementType(routeInfo.Component)) {\n            throw new Error(`The default export is not a React Component in page: \"${pathname}\"`);\n          }\n        }\n        const wasBailedPrefetch = data == null ? void 0 : (ref12 = data.response) == null ? void 0 : ref12.headers.get('x-middleware-skip');\n        const shouldFetchData = routeInfo.__N_SSG || routeInfo.__N_SSP;\n        // For non-SSG prefetches that bailed before sending data\n        // we clear the cache to fetch full response\n        if (wasBailedPrefetch && (data == null ? void 0 : data.dataHref)) {\n          delete _this.sdc[data.dataHref];\n        }\n        const {\n          props,\n          cacheKey\n        } = yield _this._getData(_async_to_generator(function* () {\n          if (shouldFetchData) {\n            if ((data == null ? void 0 : data.json) && !wasBailedPrefetch) {\n              return {\n                cacheKey: data.cacheKey,\n                props: data.json\n              };\n            }\n            const dataHref = (data == null ? void 0 : data.dataHref) ? data.dataHref : _this.pageLoader.getDataHref({\n              href: (0, _formatUrl).formatWithValidation({\n                pathname,\n                query\n              }),\n              asPath: resolvedAs,\n              locale\n            });\n            const fetched = yield fetchNextData({\n              dataHref,\n              isServerRender: _this.isSsr,\n              parseJSON: true,\n              inflightCache: wasBailedPrefetch ? {} : _this.sdc,\n              persistCache: !isPreview,\n              isPrefetch: false,\n              unstable_skipClientCache\n            });\n            return {\n              cacheKey: fetched.cacheKey,\n              props: fetched.json || {}\n            };\n          }\n          return {\n            headers: {},\n            props: yield _this.getInitialProps(routeInfo.Component,\n            // we provide AppTree later so this needs to be `any`\n            {\n              pathname,\n              query,\n              asPath: as,\n              locale,\n              locales: _this.locales,\n              defaultLocale: _this.defaultLocale\n            })\n          };\n        }));\n        // Only bust the data cache for SSP routes although\n        // middleware can skip cache per request with\n        // x-middleware-cache: no-cache as well\n        if (routeInfo.__N_SSP && fetchNextDataParams.dataHref && cacheKey) {\n          delete _this.sdc[cacheKey];\n        }\n        // we kick off a HEAD request in the background\n        // when a non-prefetch request is made to signal revalidation\n        if (!_this.isPreview && routeInfo.__N_SSG && process.env.NODE_ENV !== 'development' && !isQueryUpdating) {\n          fetchNextData(Object.assign({}, fetchNextDataParams, {\n            isBackground: true,\n            persistCache: false,\n            inflightCache: _this.sbc\n          })).catch(() => {});\n        }\n        props.pageProps = Object.assign({}, props.pageProps);\n        routeInfo.props = props;\n        routeInfo.route = route;\n        routeInfo.query = query;\n        routeInfo.resolvedAs = resolvedAs;\n        _this.components[route] = routeInfo;\n        return routeInfo;\n      } catch (err) {\n        return _this.handleRouteInfoError((0, _isError).getProperError(err), pathname, query, as, routeProps);\n      }\n    })();\n  }\n  set(state, data, resetScroll) {\n    this.state = state;\n    return this.sub(data, this.components['/_app'].Component, resetScroll);\n  }\n  /**\n  * Callback to execute before replacing router state\n  * @param cb callback to be executed\n  */\n  beforePopState(cb) {\n    this._bps = cb;\n  }\n  onlyAHashChange(as) {\n    if (!this.asPath) return false;\n    const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n    const [newUrlNoHash, newHash] = as.split('#');\n    // Makes sure we scroll to the provided hash if the url/hash are the same\n    if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n      return true;\n    }\n    // If the urls are change, there's more than a hash change\n    if (oldUrlNoHash !== newUrlNoHash) {\n      return false;\n    }\n    // If the hash has changed, then it's a hash only change.\n    // This check is necessary to handle both the enter and\n    // leave hash === '' cases. The identity case falls through\n    // and is treated as a next reload.\n    return oldHash !== newHash;\n  }\n  scrollToHash(as) {\n    const [, hash = ''] = as.split('#');\n    // Scroll to top if the hash is just `#` with no value or `#top`\n    // To mirror browsers\n    if (hash === '' || hash === 'top') {\n      (0, _handleSmoothScroll).handleSmoothScroll(() => window.scrollTo(0, 0));\n      return;\n    }\n    // Decode hash to make non-latin anchor works.\n    const rawHash = decodeURIComponent(hash);\n    // First we check if the element by id is found\n    const idEl = document.getElementById(rawHash);\n    if (idEl) {\n      (0, _handleSmoothScroll).handleSmoothScroll(() => idEl.scrollIntoView());\n      return;\n    }\n    // If there's no element with the id, we check the `name` property\n    // To mirror browsers\n    const nameEl = document.getElementsByName(rawHash)[0];\n    if (nameEl) {\n      (0, _handleSmoothScroll).handleSmoothScroll(() => nameEl.scrollIntoView());\n    }\n  }\n  urlIsNew(asPath) {\n    return this.asPath !== asPath;\n  }\n  /**\n  * Prefetch page code, you may wait for the data during page rendering.\n  * This feature only works in production!\n  * @param url the href of prefetched page\n  * @param asPath the as path of the prefetched page\n  */\n  prefetch(url) {\n    let asPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : url;\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _this = this;\n    return _async_to_generator(function* () {\n      // Prefetch is not supported in development mode because it would trigger on-demand-entries\n      if (process.env.NODE_ENV !== 'production') {\n        return;\n      }\n      if (typeof window !== 'undefined' && (0, _isBot).isBot(window.navigator.userAgent)) {\n        // No prefetches for bots that render the link since they are typically navigating\n        // links via the equivalent of a hard navigation and hence never utilize these\n        // prefetches.\n        return;\n      }\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n      const originalPathname = pathname;\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        if (options.locale === false) {\n          pathname = (0, _normalizeLocalePath).normalizeLocalePath(pathname, _this.locales).pathname;\n          parsed.pathname = pathname;\n          url = (0, _formatUrl).formatWithValidation(parsed);\n          let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n          const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n          parsedAs.pathname = localePathResult.pathname;\n          options.locale = localePathResult.detectedLocale || _this.defaultLocale;\n          asPath = (0, _formatUrl).formatWithValidation(parsedAs);\n        }\n      }\n      const pages = yield _this.pageLoader.getPageList();\n      let resolvedAs = asPath;\n      const locale = typeof options.locale !== 'undefined' ? options.locale || undefined : _this.locale;\n      const isMiddlewareMatch = yield matchesMiddleware({\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      if (process.env.__NEXT_HAS_REWRITES && asPath.startsWith('/')) {\n        let rewrites;\n        ({\n          __rewrites: rewrites\n        } = yield (0, _routeLoader).getClientBuildManifest());\n        const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(asPath, _this.locale), true), pages, rewrites, parsed.query, p => resolveDynamicRoute(p, pages), _this.locales);\n        if (rewritesResult.externalDest) {\n          return;\n        }\n        if (!isMiddlewareMatch) {\n          resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(rewritesResult.asPath), _this.locale);\n        }\n        if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n          // if this directly matches a page we need to update the href to\n          // allow the correct page chunk to be loaded\n          pathname = rewritesResult.resolvedHref;\n          parsed.pathname = pathname;\n          if (!isMiddlewareMatch) {\n            url = (0, _formatUrl).formatWithValidation(parsed);\n          }\n        }\n      }\n      parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n      if ((0, _isDynamic).isDynamicRoute(parsed.pathname)) {\n        pathname = parsed.pathname;\n        parsed.pathname = pathname;\n        Object.assign(query, (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(parsed.pathname))((0, _parsePath).parsePath(asPath).pathname) || {});\n        if (!isMiddlewareMatch) {\n          url = (0, _formatUrl).formatWithValidation(parsed);\n        }\n      }\n      const data = process.env.__NEXT_MIDDLEWARE_PREFETCH === 'strict' ? null : yield withMiddlewareEffects({\n        fetchData: () => fetchNextData({\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname: originalPathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true\n        }),\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      /**\n      * If there was a rewrite we apply the effects of the rewrite on the\n      * current parameters for the prefetch.\n      */\n      if ((data == null ? void 0 : data.effect.type) === 'rewrite') {\n        parsed.pathname = data.effect.resolvedHref;\n        pathname = data.effect.resolvedHref;\n        query = _extends({}, query, data.effect.parsedAs.query);\n        resolvedAs = data.effect.parsedAs.pathname;\n        url = (0, _formatUrl).formatWithValidation(parsed);\n      }\n      /**\n      * If there is a redirect to an external destination then we don't have\n      * to prefetch content as it will be unused.\n      */\n      if ((data == null ? void 0 : data.effect.type) === 'redirect-external') {\n        return;\n      }\n      const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      yield Promise.all([_this.pageLoader._isSsg(route).then(isSsg => {\n        return isSsg ? fetchNextData({\n          dataHref: (data == null ? void 0 : data.json) ? data == null ? void 0 : data.dataHref : _this.pageLoader.getDataHref({\n            href: url,\n            asPath: resolvedAs,\n            locale: locale\n          }),\n          isServerRender: false,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true,\n          unstable_skipClientCache: options.unstable_skipClientCache || options.priority && !!process.env.__NEXT_OPTIMISTIC_CLIENT_CACHE\n        }).then(() => false) : false;\n      }), _this.pageLoader[options.priority ? 'loadPage' : 'prefetch'](route)]);\n    })();\n  }\n  fetchComponent(route) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      const handleCancelled = getCancelledHandler({\n        route,\n        router: _this\n      });\n      try {\n        const componentResult = yield _this.pageLoader.loadPage(route);\n        handleCancelled();\n        return componentResult;\n      } catch (err) {\n        handleCancelled();\n        throw err;\n      }\n    })();\n  }\n  _getData(fn) {\n    let cancelled = false;\n    const cancel = () => {\n      cancelled = true;\n    };\n    this.clc = cancel;\n    return fn().then(data => {\n      if (cancel === this.clc) {\n        this.clc = null;\n      }\n      if (cancelled) {\n        const err = new Error('Loading initial props cancelled');\n        err.cancelled = true;\n        throw err;\n      }\n      return data;\n    });\n  }\n  _getFlightData(dataHref) {\n    // Do not cache RSC flight response since it's not a static resource\n    return fetchNextData({\n      dataHref,\n      isServerRender: true,\n      parseJSON: false,\n      inflightCache: this.sdc,\n      persistCache: false,\n      isPrefetch: false\n    }).then(_ref6 => {\n      let {\n        text\n      } = _ref6;\n      return {\n        data: text\n      };\n    });\n  }\n  getInitialProps(Component, ctx) {\n    const {\n      Component: App\n    } = this.components['/_app'];\n    const AppTree = this._wrapApp(App);\n    ctx.AppTree = AppTree;\n    return (0, _utils).loadGetInitialProps(App, {\n      AppTree,\n      Component,\n      router: this,\n      ctx\n    });\n  }\n  get route() {\n    return this.state.route;\n  }\n  get pathname() {\n    return this.state.pathname;\n  }\n  get query() {\n    return this.state.query;\n  }\n  get asPath() {\n    return this.state.asPath;\n  }\n  get locale() {\n    return this.state.locale;\n  }\n  get isFallback() {\n    return this.state.isFallback;\n  }\n  get isPreview() {\n    return this.state.isPreview;\n  }\n  constructor(pathname1, query1, as1, _ref7) {\n    let {\n      initialProps,\n      pageLoader,\n      App,\n      wrapApp,\n      Component,\n      err,\n      subscription,\n      isFallback,\n      locale,\n      locales,\n      defaultLocale,\n      domainLocales,\n      isPreview\n    } = _ref7;\n    // Server Data Cache (full data requests)\n    this.sdc = {};\n    // Server Background Cache (HEAD requests)\n    this.sbc = {};\n    this.isFirstPopStateEvent = true;\n    this._key = createKey();\n    this.onPopState = e => {\n      const {\n        isFirstPopStateEvent\n      } = this;\n      this.isFirstPopStateEvent = false;\n      const state = e.state;\n      if (!state) {\n        // We get state as undefined for two reasons.\n        //  1. With older safari (< 8) and older chrome (< 34)\n        //  2. When the URL changed with #\n        //\n        // In the both cases, we don't need to proceed and change the route.\n        // (as it's already changed)\n        // But we can simply replace the state with the new changes.\n        // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n        // So, doing the following for (1) does no harm.\n        const {\n          pathname,\n          query\n        } = this;\n        this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n          pathname: (0, _addBasePath).addBasePath(pathname),\n          query\n        }), (0, _utils).getURL());\n        return;\n      }\n      // __NA is used to identify if the history entry can be handled by the app-router.\n      if (state.__NA) {\n        window.location.reload();\n        return;\n      }\n      if (!state.__N) {\n        return;\n      }\n      // Safari fires popstateevent when reopening the browser.\n      if (isFirstPopStateEvent && this.locale === state.options.locale && state.as === this.asPath) {\n        return;\n      }\n      let forcedScroll;\n      const {\n        url,\n        as,\n        options,\n        key\n      } = state;\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          if (this._key !== key) {\n            // Snapshot current scroll position:\n            try {\n              sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n                x: self.pageXOffset,\n                y: self.pageYOffset\n              }));\n            } catch (e) {}\n            // Restore old scroll position:\n            try {\n              const v = sessionStorage.getItem('__next_scroll_' + key);\n              forcedScroll = JSON.parse(v);\n            } catch (e1) {\n              forcedScroll = {\n                x: 0,\n                y: 0\n              };\n            }\n          }\n        }\n      }\n      this._key = key;\n      const {\n        pathname\n      } = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      // Make sure we don't re-render on initial load,\n      // can be caused by navigating back from an external site\n      if (this.isSsr && as === (0, _addBasePath).addBasePath(this.asPath) && pathname === (0, _addBasePath).addBasePath(this.pathname)) {\n        return;\n      }\n      // If the downstream application returns falsy, return.\n      // They will then be responsible for handling the event.\n      if (this._bps && !this._bps(state)) {\n        return;\n      }\n      this.change('replaceState', url, as, Object.assign({}, options, {\n        shallow: options.shallow && this._shallow,\n        locale: options.locale || this.defaultLocale,\n        // @ts-ignore internal value not exposed on types\n        _h: 0\n      }), forcedScroll);\n    };\n    // represents the current component key\n    const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname1);\n    // set up the component cache (by route keys)\n    this.components = {};\n    // We should not keep the cache, if there's an error\n    // Otherwise, this cause issues when when going back and\n    // come again to the errored page.\n    if (pathname1 !== '/_error') {\n      this.components[route] = {\n        Component,\n        initial: true,\n        props: initialProps,\n        err,\n        __N_SSG: initialProps && initialProps.__N_SSG,\n        __N_SSP: initialProps && initialProps.__N_SSP\n      };\n    }\n    this.components['/_app'] = {\n      Component: App,\n      styleSheets: []\n    };\n    if (process.env.__NEXT_CLIENT_ROUTER_FILTER_ENABLED) {\n      const {\n        BloomFilter\n      } = require('../../lib/bloom-filter');\n      const staticFilterData = process.env.__NEXT_CLIENT_ROUTER_S_FILTER;\n      const dynamicFilterData = process.env.__NEXT_CLIENT_ROUTER_D_FILTER;\n      if (staticFilterData == null ? void 0 : staticFilterData.hashes) {\n        this._bfl_s = new BloomFilter(staticFilterData.size, staticFilterData.hashes);\n        this._bfl_s.import(staticFilterData);\n      }\n      if (dynamicFilterData == null ? void 0 : dynamicFilterData.hashes) {\n        this._bfl_d = new BloomFilter(dynamicFilterData.size, dynamicFilterData.hashes);\n        this._bfl_d.import(dynamicFilterData);\n      }\n    }\n    // Backwards compat for Router.router.events\n    // TODO: Should be remove the following major version as it was never documented\n    this.events = Router.events;\n    this.pageLoader = pageLoader;\n    // if auto prerendered and dynamic route wait to update asPath\n    // until after mount to prevent hydration mismatch\n    const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n    this.basePath = process.env.__NEXT_ROUTER_BASEPATH || '';\n    this.sub = subscription;\n    this.clc = null;\n    this._wrapApp = wrapApp;\n    // make sure to ignore extra popState in safari on navigating\n    // back from external site\n    this.isSsr = true;\n    this.isLocaleDomain = false;\n    this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !process.env.__NEXT_HAS_REWRITES);\n    if (process.env.__NEXT_I18N_SUPPORT) {\n      this.locales = locales;\n      this.defaultLocale = defaultLocale;\n      this.domainLocales = domainLocales;\n      this.isLocaleDomain = !!(0, _detectDomainLocale).detectDomainLocale(domainLocales, self.location.hostname);\n    }\n    this.state = {\n      route,\n      pathname: pathname1,\n      query: query1,\n      asPath: autoExportDynamic ? pathname1 : as1,\n      isPreview: !!isPreview,\n      locale: process.env.__NEXT_I18N_SUPPORT ? locale : undefined,\n      isFallback\n    };\n    this._initialMatchesMiddlewarePromise = Promise.resolve(false);\n    if (typeof window !== 'undefined') {\n      // make sure \"as\" doesn't start with double slashes or else it can\n      // throw an error as it's considered invalid\n      if (!as1.startsWith('//')) {\n        // in order for `e.state` to work on the `onpopstate` event\n        // we have to register the initial route upon initialization\n        const options = {\n          locale\n        };\n        const asPath = (0, _utils).getURL();\n        this._initialMatchesMiddlewarePromise = matchesMiddleware({\n          router: this,\n          locale,\n          asPath\n        }).then(matches => {\n          options._shouldResolveHref = as1 !== pathname1;\n          this.changeState('replaceState', matches ? asPath : (0, _formatUrl).formatWithValidation({\n            pathname: (0, _addBasePath).addBasePath(pathname1),\n            query: query1\n          }), asPath, options);\n          return matches;\n        });\n      }\n      window.addEventListener('popstate', this.onPopState);\n      // enable custom scroll restoration handling when available\n      // otherwise fallback to browser's default handling\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          window.history.scrollRestoration = 'manual';\n        }\n      }\n    }\n  }\n}\nRouter.events = (0, _mitt).default();\nexports.default = Router;","map":{"version":3,"names":["matchesMiddleware","createKey","_removeTrailingSlash","require","_routeLoader","_script","_isError","_interop_require_wildcard","_denormalizePagePath","_normalizeLocalePath","_mitt","_interop_require_default","_utils","_isDynamic","_parseRelativeUrl","_resolveRewrites","_routeMatcher","_routeRegex","_formatUrl","_detectDomainLocale","_parsePath","_addLocale","_removeLocale","_removeBasePath","_addBasePath","_hasBasePath","_isApiRoute","_getNextPathnameInfo","_formatNextPathnameInfo","_compareStates","_isLocalUrl","_isBot","_omit","_resolveHref","_interpolateAs","_handleSmoothScroll","buildCancellationError","Object","assign","Error","cancelled","options","_matchesMiddleware","apply","arguments","_async_to_generator","matchers","Promise","resolve","router","pageLoader","getMiddleware","pathname","asPathname","parsePath","asPath","cleanedAs","hasBasePath","removeBasePath","asWithBasePathAndLocale","addBasePath","addLocale","locale","some","m","RegExp","regexp","test","stripOrigin","url","origin","getLocationOrigin","startsWith","substring","length","prepareUrlAs","as","resolvedHref","resolvedAs","resolveHref","hrefWasAbsolute","asWasAbsolute","preparedUrl","preparedAs","resolveDynamicRoute","pages","cleanPathname","removeTrailingSlash","denormalizePagePath","includes","page","isDynamicRoute","getRouteRegex","re","getMiddlewareData","source","response","nextConfig","basePath","i18n","locales","trailingSlash","Boolean","process","env","__NEXT_TRAILING_SLASH","rewriteHeader","headers","get","rewriteTarget","matchedPath","__NEXT_EXTERNAL_MIDDLEWARE_REWRITE_RESOLVE","parsedRewriteTarget","parseRelativeUrl","pathnameInfo","getNextPathnameInfo","parseData","fsPathname","all","getPageList","getClientBuildManifest","then","_ref","__rewrites","rewrites","normalizeLocalePath","parsedSource","__NEXT_HAS_REWRITES","result","default","query","path","matchedPage","parsedAs","resolvedPathname","matches","getRouteMatcher","type","src","formatNextPathnameInfo","_extends","defaultLocale","buildId","destination","hash","redirectTarget","newAs","newUrl","withMiddlewareEffects","_withMiddlewareEffects","fetchData","data","effect","dataHref","json","text","cacheKey","e","manualScrollRestoration","__NEXT_SCROLL_RESTORATION","window","history","v","sessionStorage","setItem","removeItem","n","SSG_DATA_NOT_FOUND","Symbol","fetchRetry","attempts","fetch","credentials","method","ok","status","tryToParseAsJSON","JSON","parse","error","fetchNextData","_ref2","inflightCache","isPrefetch","hasMiddleware","isServerRender","parseJSON","persistCache","isBackground","unstable_skipClientCache","href","URL","location","ref1","getData","params","purpose","ref","notFound","markAssetError","NODE_ENV","catch","err","message","undefined","Math","random","toString","slice","handleHardNavigation","_ref3","getCancelledHandler","_ref4","route","cancel","clc","handleCancelled","Router","reload","back","forward","push","_key","stringify","x","self","pageXOffset","y","pageYOffset","change","replace","_bfl","__NEXT_CLIENT_ROUTER_FILTER_ENABLED","matchesBflStatic","matchesBflDynamic","curAs","asNoSlash","asNoSlashLocale","_this","ref2","_bfl_s","has","normalizedAS","curAsParts","split","i","ref3","currentPart","join","_bfl_d","forcedScroll","isLocalURL","isQueryUpdating","_h","shouldResolveHref","_shouldResolveHref","nextState","state","readyStateChange","isReady","isSsr","prevLocale","__NEXT_I18N_SUPPORT","localePathResult","detectedLocale","formatWithValidation","didNavigate","detectedDomain","detectDomainLocale","domainLocales","isLocaleDomain","hostname","domain","asNoBasePath","http","ST","performance","mark","shallow","scroll","routeProps","_inFlightRoute","events","emit","removeLocale","localeChange","onlyAHashChange","changeState","scrollToHash","set","components","parsed","urlIsNew","parsedAsPathname","isMiddlewareRewrite","isMiddlewareMatch","rewritesResult","p","externalDest","routeMatch","routeRegex","shouldInterpolate","interpolatedAs","interpolateAs","missingParams","keys","groups","filter","param","optional","console","warn","omit","isErrorRoute","ref4","ref5","ref6","routeInfo","getRouteInfo","isPreview","isFallback","cleanedParsedPathname","forEach","key","prefixedAs","rewriteAs","localeResult","curRouteMatch","component","Component","unstable_scriptLoader","scripts","concat","script","handleClientScriptLoad","props","__N_SSG","__N_SSP","pageProps","__N_REDIRECT","__N_REDIRECT_BASE_PATH","parsedHref","__N_PREVIEW","notFoundRoute","fetchComponent","_","__NEXT_DATA__","statusCode","_route","isValidShallowRoute","_scroll","shouldScroll","resetScroll","upcomingScrollState","upcomingRouterState","ref7","ref8","ref9","canSkipUpdating","compareRouterStates","document","documentElement","lang","hashRegex","err1","getURL","_shallow","__N","handleRouteInfoError","loadErrorFail","isAssetError","styleSheets","getInitialProps","gipErr","routeInfoErr","_ref5","requestedRoute","ref10","ref11","ref12","existingInfo","cachedRouteInfo","fetchNextDataParams","getDataHref","skipInterpolation","sbc","sdc","resolvedRoute","isAPIRoute","res","mod","isValidElementType","wasBailedPrefetch","shouldFetchData","_getData","fetched","getProperError","sub","beforePopState","cb","_bps","oldUrlNoHash","oldHash","newUrlNoHash","newHash","handleSmoothScroll","scrollTo","rawHash","decodeURIComponent","idEl","getElementById","scrollIntoView","nameEl","getElementsByName","prefetch","isBot","navigator","userAgent","originalPathname","__NEXT_MIDDLEWARE_PREFETCH","_isSsg","isSsg","priority","__NEXT_OPTIMISTIC_CLIENT_CACHE","componentResult","loadPage","fn","_getFlightData","_ref6","ctx","App","AppTree","_wrapApp","loadGetInitialProps","constructor","pathname1","query1","as1","_ref7","initialProps","wrapApp","subscription","isFirstPopStateEvent","onPopState","__NA","getItem","e1","initial","BloomFilter","staticFilterData","__NEXT_CLIENT_ROUTER_S_FILTER","dynamicFilterData","__NEXT_CLIENT_ROUTER_D_FILTER","hashes","size","import","autoExportDynamic","autoExport","__NEXT_ROUTER_BASEPATH","gssp","gip","appGip","gsp","search","_initialMatchesMiddlewarePromise","addEventListener","scrollRestoration"],"sources":["../../../../src/shared/lib/router/router.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
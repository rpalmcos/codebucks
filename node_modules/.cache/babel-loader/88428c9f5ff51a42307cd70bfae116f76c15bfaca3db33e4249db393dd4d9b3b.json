{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.markAssetError = markAssetError;\nexports.isAssetError = isAssetError;\nexports.getClientBuildManifest = getClientBuildManifest;\nexports.createRouteLoader = createRouteLoader;\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\nvar _getAssetPathFromRoute = _interop_require_default(require(\"../shared/lib/router/utils/get-asset-path-from-route\"));\nvar _trustedTypes = require(\"./trusted-types\");\nvar _requestIdleCallback = require(\"./request-idle-callback\");\n// 3.8s was arbitrarily chosen as it's what https://web.dev/interactive\n// considers as \"Good\" time-to-interactive. We must assume something went\n// wrong beyond this point, and then fall-back to a full page transition to\n// show the user something of value.\nconst MS_MAX_IDLE_DELAY = 3800;\nfunction withFuture(key, map, generator) {\n  let entry = map.get(key);\n  if (entry) {\n    if ('future' in entry) {\n      return entry.future;\n    }\n    return Promise.resolve(entry);\n  }\n  let resolver;\n  const prom = new Promise(resolve => {\n    resolver = resolve;\n  });\n  map.set(key, entry = {\n    resolve: resolver,\n    future: prom\n  });\n  return generator ? generator() // eslint-disable-next-line no-sequences\n  .then(value => (resolver(value), value)).catch(err => {\n    map.delete(key);\n    throw err;\n  }) : prom;\n}\nconst ASSET_LOAD_ERROR = Symbol('ASSET_LOAD_ERROR');\nfunction markAssetError(err) {\n  return Object.defineProperty(err, ASSET_LOAD_ERROR, {});\n}\nfunction isAssetError(err) {\n  return err && ASSET_LOAD_ERROR in err;\n}\nfunction hasPrefetch(link) {\n  try {\n    link = document.createElement('link');\n    return (\n      // detect IE11 since it supports prefetch but isn't detected\n      // with relList.support\n      !!window.MSInputMethodContext && !!document.documentMode || link.relList.supports('prefetch')\n    );\n  } catch (e) {\n    return false;\n  }\n}\nconst canPrefetch = hasPrefetch();\nfunction prefetchViaDom(href, as, link) {\n  return new Promise((resolve, reject) => {\n    const selector = `\n      link[rel=\"prefetch\"][href^=\"${href}\"],\n      link[rel=\"preload\"][href^=\"${href}\"],\n      script[src^=\"${href}\"]`;\n    if (document.querySelector(selector)) {\n      return resolve();\n    }\n    link = document.createElement('link');\n    // The order of property assignment here is intentional:\n    if (as) link.as = as;\n    link.rel = `prefetch`;\n    link.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n    link.onload = resolve;\n    link.onerror = () => reject(markAssetError(new Error(`Failed to prefetch: ${href}`)));\n    // `href` should always be last:\n    link.href = href;\n    document.head.appendChild(link);\n  });\n}\nfunction appendScript(src, script) {\n  return new Promise((resolve, reject) => {\n    script = document.createElement('script');\n    // The order of property assignment here is intentional.\n    // 1. Setup success/failure hooks in case the browser synchronously\n    //    executes when `src` is set.\n    script.onload = resolve;\n    script.onerror = () => reject(markAssetError(new Error(`Failed to load script: ${src}`)));\n    // 2. Configure the cross-origin attribute before setting `src` in case the\n    //    browser begins to fetch.\n    script.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n    // 3. Finally, set the source and inject into the DOM in case the child\n    //    must be appended for fetching to start.\n    script.src = src;\n    document.body.appendChild(script);\n  });\n}\n// We wait for pages to be built in dev before we start the route transition\n// timeout to prevent an un-necessary hard navigation in development.\nlet devBuildPromise;\n// Resolve a promise that times out after given amount of milliseconds.\nfunction resolvePromiseWithTimeout(p, ms, err) {\n  return new Promise((resolve, reject) => {\n    let cancelled = false;\n    p.then(r => {\n      // Resolved, cancel the timeout\n      cancelled = true;\n      resolve(r);\n    }).catch(reject);\n    // We wrap these checks separately for better dead-code elimination in\n    // production bundles.\n    if (process.env.NODE_ENV === 'development') {\n      (devBuildPromise || Promise.resolve()).then(() => {\n        (0, _requestIdleCallback).requestIdleCallback(() => setTimeout(() => {\n          if (!cancelled) {\n            reject(err);\n          }\n        }, ms));\n      });\n    }\n    if (process.env.NODE_ENV !== 'development') {\n      (0, _requestIdleCallback).requestIdleCallback(() => setTimeout(() => {\n        if (!cancelled) {\n          reject(err);\n        }\n      }, ms));\n    }\n  });\n}\nfunction getClientBuildManifest() {\n  if (self.__BUILD_MANIFEST) {\n    return Promise.resolve(self.__BUILD_MANIFEST);\n  }\n  const onBuildManifest = new Promise(resolve => {\n    // Mandatory because this is not concurrent safe:\n    const cb = self.__BUILD_MANIFEST_CB;\n    self.__BUILD_MANIFEST_CB = () => {\n      resolve(self.__BUILD_MANIFEST);\n      cb && cb();\n    };\n  });\n  return resolvePromiseWithTimeout(onBuildManifest, MS_MAX_IDLE_DELAY, markAssetError(new Error('Failed to load client build manifest')));\n}\nfunction getFilesForRoute(assetPrefix, route) {\n  if (process.env.NODE_ENV === 'development') {\n    const scriptUrl = assetPrefix + '/_next/static/chunks/pages' + encodeURI((0, _getAssetPathFromRoute).default(route, '.js'));\n    return Promise.resolve({\n      scripts: [(0, _trustedTypes).__unsafeCreateTrustedScriptURL(scriptUrl)],\n      // Styles are handled by `style-loader` in development:\n      css: []\n    });\n  }\n  return getClientBuildManifest().then(manifest => {\n    if (!(route in manifest)) {\n      throw markAssetError(new Error(`Failed to lookup route: ${route}`));\n    }\n    const allFiles = manifest[route].map(entry => assetPrefix + '/_next/' + encodeURI(entry));\n    return {\n      scripts: allFiles.filter(v => v.endsWith('.js')).map(v => (0, _trustedTypes).__unsafeCreateTrustedScriptURL(v)),\n      css: allFiles.filter(v => v.endsWith('.css'))\n    };\n  });\n}\nfunction createRouteLoader(assetPrefix) {\n  const entrypoints = new Map();\n  const loadedScripts = new Map();\n  const styleSheets = new Map();\n  const routes = new Map();\n  function maybeExecuteScript(src) {\n    // With HMR we might need to \"reload\" scripts when they are\n    // disposed and readded. Executing scripts twice has no functional\n    // differences\n    if (process.env.NODE_ENV !== 'development') {\n      let prom = loadedScripts.get(src.toString());\n      if (prom) {\n        return prom;\n      }\n      // Skip executing script if it's already in the DOM:\n      if (document.querySelector(`script[src^=\"${src}\"]`)) {\n        return Promise.resolve();\n      }\n      loadedScripts.set(src.toString(), prom = appendScript(src));\n      return prom;\n    } else {\n      return appendScript(src);\n    }\n  }\n  function fetchStyleSheet(href) {\n    let prom = styleSheets.get(href);\n    if (prom) {\n      return prom;\n    }\n    styleSheets.set(href, prom = fetch(href).then(res => {\n      if (!res.ok) {\n        throw new Error(`Failed to load stylesheet: ${href}`);\n      }\n      return res.text().then(text => ({\n        href: href,\n        content: text\n      }));\n    }).catch(err => {\n      throw markAssetError(err);\n    }));\n    return prom;\n  }\n  return {\n    whenEntrypoint(route) {\n      return withFuture(route, entrypoints);\n    },\n    onEntrypoint(route, execute) {\n      (execute ? Promise.resolve().then(() => execute()).then(exports => ({\n        component: exports && exports.default || exports,\n        exports: exports\n      }), err => ({\n        error: err\n      })) : Promise.resolve(undefined)).then(input => {\n        const old = entrypoints.get(route);\n        if (old && 'resolve' in old) {\n          if (input) {\n            entrypoints.set(route, input);\n            old.resolve(input);\n          }\n        } else {\n          if (input) {\n            entrypoints.set(route, input);\n          } else {\n            entrypoints.delete(route);\n          }\n          // when this entrypoint has been resolved before\n          // the route is outdated and we want to invalidate\n          // this cache entry\n          routes.delete(route);\n        }\n      });\n    },\n    loadRoute(route, prefetch) {\n      return withFuture(route, routes, () => {\n        let devBuildPromiseResolve;\n        if (process.env.NODE_ENV === 'development') {\n          devBuildPromise = new Promise(resolve => {\n            devBuildPromiseResolve = resolve;\n          });\n        }\n        return resolvePromiseWithTimeout(getFilesForRoute(assetPrefix, route).then(_ref => {\n          let {\n            scripts,\n            css\n          } = _ref;\n          return Promise.all([entrypoints.has(route) ? [] : Promise.all(scripts.map(maybeExecuteScript)), Promise.all(css.map(fetchStyleSheet))]);\n        }).then(res => {\n          return this.whenEntrypoint(route).then(entrypoint => ({\n            entrypoint,\n            styles: res[1]\n          }));\n        }), MS_MAX_IDLE_DELAY, markAssetError(new Error(`Route did not complete loading: ${route}`))).then(_ref2 => {\n          let {\n            entrypoint,\n            styles\n          } = _ref2;\n          const res = Object.assign({\n            styles: styles\n          }, entrypoint);\n          return 'error' in entrypoint ? entrypoint : res;\n        }).catch(err => {\n          if (prefetch) {\n            // we don't want to cache errors during prefetch\n            throw err;\n          }\n          return {\n            error: err\n          };\n        }).finally(() => {\n          return devBuildPromiseResolve == null ? void 0 : devBuildPromiseResolve();\n        });\n      });\n    },\n    prefetch(route) {\n      // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n      // License: Apache 2.0\n      let cn;\n      if (cn = navigator.connection) {\n        // Don't prefetch if using 2G or if Save-Data is enabled.\n        if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve();\n      }\n      return getFilesForRoute(assetPrefix, route).then(output => Promise.all(canPrefetch ? output.scripts.map(script => prefetchViaDom(script.toString(), 'script')) : [])).then(() => {\n        (0, _requestIdleCallback).requestIdleCallback(() => this.loadRoute(route, true).catch(() => {}));\n      }).catch(\n      // swallow prefetch errors\n      () => {});\n    }\n  };\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"names":["markAssetError","isAssetError","getClientBuildManifest","createRouteLoader","_getAssetPathFromRoute","_interop_require_default","require","_trustedTypes","_requestIdleCallback","MS_MAX_IDLE_DELAY","withFuture","key","map","generator","entry","get","future","Promise","resolve","resolver","prom","set","then","value","catch","err","delete","ASSET_LOAD_ERROR","Symbol","Object","defineProperty","hasPrefetch","link","document","createElement","window","MSInputMethodContext","documentMode","relList","supports","e","canPrefetch","prefetchViaDom","href","as","reject","selector","querySelector","rel","crossOrigin","process","env","__NEXT_CROSS_ORIGIN","onload","onerror","Error","head","appendChild","appendScript","src","script","body","devBuildPromise","resolvePromiseWithTimeout","p","ms","cancelled","r","NODE_ENV","requestIdleCallback","setTimeout","self","__BUILD_MANIFEST","onBuildManifest","cb","__BUILD_MANIFEST_CB","getFilesForRoute","assetPrefix","route","scriptUrl","encodeURI","default","scripts","__unsafeCreateTrustedScriptURL","css","manifest","allFiles","filter","v","endsWith","entrypoints","Map","loadedScripts","styleSheets","routes","maybeExecuteScript","toString","fetchStyleSheet","fetch","res","ok","text","content","whenEntrypoint","onEntrypoint","execute","exports","component","error","undefined","input","old","loadRoute","prefetch","devBuildPromiseResolve","_ref","all","has","entrypoint","styles","_ref2","assign","finally","cn","navigator","connection","saveData","test","effectiveType","output"],"sources":["../../src/client/route-loader.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allocateArray = allocateArray;\nexports.numberToHex = numberToHex;\nexports.randomInt = randomInt;\nexports.xorBuffer = xorBuffer;\nexports.isEmptyBuffer = isEmptyBuffer;\nexports.getDefaultSeed = getDefaultSeed;\nexports.BufferError = void 0;\nconst BufferError = 'The buffer class must be available, if you are a browser user use the buffer package (https://www.npmjs.com/package/buffer)';\nexports.BufferError = BufferError;\nfunction allocateArray(size, defaultValue) {\n  const array = new Array(size);\n  const getDefault = typeof defaultValue === 'function' ? defaultValue : () => defaultValue;\n  for (let ind = 0; ind < size; ind++) {\n    array[ind] = getDefault();\n  }\n  return array;\n}\nfunction numberToHex(elem) {\n  let e = Number(elem).toString(16);\n  if (e.length % 4 !== 0) {\n    e = '0'.repeat(4 - e.length % 4) + e;\n  }\n  return e;\n}\nfunction randomInt(min, max, random) {\n  if (random === undefined) {\n    random = Math.random;\n  }\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  const rn = random();\n  return Math.floor(rn * (max - min + 1)) + min;\n}\nfunction xorBuffer(a, b) {\n  const length = Math.max(a.length, b.length);\n  const buffer = Buffer.allocUnsafe(length).fill(0);\n  for (let i = 0; i < length; ++i) {\n    if (i < a.length && i < b.length) {\n      buffer[length - i - 1] = a[a.length - i - 1] ^ b[b.length - i - 1];\n    } else if (i < a.length && i >= b.length) {\n      buffer[length - i - 1] ^= a[a.length - i - 1];\n    } else if (i < b.length && i >= a.length) {\n      buffer[length - i - 1] ^= b[b.length - i - 1];\n    }\n  }\n  // now need to remove leading zeros in the buffer if any\n  let start = 0;\n  const it = buffer.values();\n  let value = it.next();\n  while (!value.done && value.value === 0) {\n    start++;\n    value = it.next();\n  }\n  return buffer.slice(start);\n}\nfunction isEmptyBuffer(buffer) {\n  if (buffer === null || !buffer) return true;\n  for (const value of buffer) {\n    if (value !== 0) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getDefaultSeed() {\n  return 0x1234567890;\n}","map":{"version":3,"names":["allocateArray","numberToHex","randomInt","xorBuffer","isEmptyBuffer","getDefaultSeed","BufferError","size","defaultValue","array","Array","getDefault","ind","elem","e","Number","toString","length","repeat","min","max","random","undefined","Math","ceil","floor","rn","a","b","buffer","Buffer","allocUnsafe","fill","i","start","it","values","value","next","done","slice"],"sources":["../../../../src/shared/lib/bloom-filter/utils.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}